<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Spring DI</title>
  <meta name="description" content="DI란 Dependency Injection의 줄임말, 즉 의존성을 주입한다는 것을 의미한다. 그렇다면 의존성이라는 것은 무엇일까? 의존관계는 말 그대로 객체와 객체 간에 의존하고 있음. 즉, 객체 B가 변하면 객체 A도 영향을 받는 것을 의미한다.">
  
  <meta name="author" content="jinow">
  <meta name="copyright" content="&copy; jinow 2018">
  

  <!-- External libraries -->
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/styles/monokai-sublime.min.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/css/lightbox.css">

  <!-- Favicon and other icons (made with http://www.favicon-generator.org/) -->
  <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/assets/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
  <link rel="manifest" href="/assets/icons/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  
  <!-- Facebook OGP cards -->
  <meta property="og:description" content="DI란 Dependency Injection의 줄임말, 즉 의존성을 주입한다는 것을 의미한다. 그렇다면 의존성이라는 것은 무엇일까? 의존관계는 말 그대로 객체와 객체 간에 의존하고 있음. 즉, 객체 B가 변하면 객체 A도 영향을 받는 것을 의미한다." />
  <meta property="og:url" content="http://localhost:4000" />
  <meta property="og:site_name" content="Jinow's blog" />
  <meta property="og:title" content="Spring DI" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="http://localhost:4000/assets/posts/1.jpg" />
  <meta property="og:image:type" content="image/png" />
  <meta property="og:image:width" content="612" />
  <meta property="og:image:height" content="605" />
  

  
  <!-- Twitter: card tags -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Spring DI">
  <meta name="twitter:description" content="DI란 Dependency Injection의 줄임말, 즉 의존성을 주입한다는 것을 의미한다. 그렇다면 의존성이라는 것은 무엇일까? 의존관계는 말 그대로 객체와 객체 간에 의존하고 있음. 즉, 객체 B가 변하면 객체 A도 영향을 받는 것을 의미한다.">
  <meta name="twitter:image" content="http://localhost:4000/assets/posts/1.jpg">
  <meta name="twitter:url" content="http://localhost:4000">
  

  

  <!-- Site styles -->
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/spring/2018/11/17/Spring-DI.html">
  <link rel="alternate" type="application/rss+xml" title="Jinow's blog" href="http://localhost:4000/feed.xml" />
</head>


  <body>

    <header class="navigation" role="banner">
  <div class="navigation-wrapper">
    <a href="/" class="logo">
      
      <img src="/assets/logo.png" alt="Jinow's blog">
      
    </a>
    <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu">
      <i class="fa fa-bars"></i>
    </a>
    <nav role="navigation">
      <ul id="js-navigation-menu" class="navigation-menu show">
        
          
          <li class="nav-link"><a href="/about/">About</a>
          
        
          
        
          
        
          
        
          
          <li class="nav-link"><a href="/posts/">Posts</a>
          
        
          
          <li class="nav-link"><a href="/typography/">Typography</a>
          
        
          
          <li class="nav-link"><a href="/tag/jekyll/">jekyll</a>
          
        
          
          <li class="nav-link"><a href="/tag/welcome/">welcome</a>
          
        
          
          <li class="nav-link"><a href="/category/jekyll/">Jekyll</a>
          
        
          
          <li class="nav-link"><a href="/category/spring/">Spring</a>
          
        
          
          <li class="nav-link"><a href="/category/java/">Java</a>
          
        
          
        
          
        
          
        
      </ul>
    </nav>
  </div>
</header>


    <div class="page-content">
        <div class="post">

<div class="post-header-container has-cover" style="background-image: url(/assets/posts/1.jpg);">
  <div class="scrim has-cover">
    <header class="post-header">
      <h1 class="title">Spring DI</h1>
      <p class="info">by <strong>jinow</strong></p>
    </header>
  </div>
</div>

<div class="wrapper">



<section class="post-meta">
  <div class="post-date">November 17, 2018</div>
  <div class="post-categories">
  in 
    
    <a href="/category/Spring">Spring</a>
    
  
  </div>
</section>

<article class="post-content">
  <p>DI란 Dependency Injection의 줄임말, 즉 의존성을 주입한다는 것을 의미한다. 그렇다면 의존성이라는 것은 무엇일까? 의존관계는 말 그대로 객체와 객체 간에 의존하고 있음. 즉, 객체 B가 변하면 객체 A도 영향을 받는 것을 의미한다.</p>

<h3 id="목차">목차</h3>
<p><a href="#의존성-주입">1.의존성 주입</a><br />
<a href="#setter-함수를-통한-의존성-주입">1.1 setter 함수를 통한 의존성 주입</a><br />
<a href="#생성자 함수를 통한 의존성 주입">1.2 생성자 함수를 통한 의존성 주입</a><br />
<a href="#스프링 컨테이너에 적용하기">1.3 스프링 컨테이너에 적용하기</a><br />
<a href="#정리">정리</a></p>

<hr />
<h3 id="의존성-주입">의존성 주입</h3>
<p>다음 코드를 통해 객체간의 의존관계가 무엇인지를 알아보도록 하자.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">Battery</span> <span class="p">{</span>
	<span class="n">protected</span> <span class="k">String</span> <span class="n">name</span><span class="p">;</span>
	<span class="n">protected</span> <span class="n">int</span> <span class="n">capacity</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">BatteryA</span> <span class="n">extends</span> <span class="n">Battery</span> <span class="p">{</span>

	<span class="k">public</span> <span class="n">BatteryA</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">this</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s2">"A배터리"</span><span class="p">;</span>
		<span class="n">this</span><span class="p">.</span><span class="n">capacity</span> <span class="p">=</span> <span class="m">10</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">BatteryB</span> <span class="n">extends</span> <span class="n">Battery</span> <span class="p">{</span>

	<span class="k">public</span> <span class="n">BatteryB</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">this</span><span class="p">.</span><span class="n">name</span> <span class="p">=</span> <span class="s2">"B배터리"</span><span class="p">;</span>
		<span class="n">this</span><span class="p">.</span><span class="n">capacity</span> <span class="p">=</span> <span class="m">30</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>장난감에 사용할 A배터리와 B배터리가 있고, 각각의 용량은 10, 30 이다.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ElectronicToy</span> <span class="p">{</span>
	<span class="n">private</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">;</span>

	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">battery</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryA</span><span class="p">();</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="err">장난감이</span> <span class="err">장착한</span> <span class="err">배터리의</span> <span class="err">스팩을</span> <span class="err">보여준다</span><span class="p">.</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">showBatterySpec</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery name : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery capacity : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">capacity</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>전자 장난감을 뜻하는 ElectoricToy 클래스가 있다고 가정하자. 전자 장난감은 배터리가 있어야 돌아가기 때문에 배터리를 필요로 하고, 해당 클래스는 A배터리로 사용하고 있다. 따라서 ElectroicToy 클래스와 Battery 클래스는 서로에 대해 의존하고 있고, 우리는 이것을 <strong>의존관계</strong>를 갖고 있다고 한다.</p>

<hr />
<h3 id="setter-함수를-통한-의존성-주입">setter 함수를 통한 의존성 주입</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ToyCreateExam</span> <span class="p">{</span>
	<span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

		<span class="n">ElectronicToy</span> <span class="n">toy</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ElectronicToy</span><span class="p">();</span>
		<span class="n">toy</span><span class="p">.</span><span class="n">showBatterySpec</span><span class="p">();</span>

		<span class="p">//</span><span class="m">10</span><span class="err">번</span> <span class="err">라인</span> <span class="err">에러</span><span class="p">..</span> <span class="err">배터리</span> <span class="err">교체불가</span>
		<span class="p">//</span><span class="n">toy</span><span class="p">.</span><span class="n">battery</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryB</span><span class="p">();</span>

	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>battery name : A배터리
battery capacity : 10
</code></pre></div></div>
<p>그렇다면 main함수를 통해 전자 장난감을 생성하여 배터리의 스팩을 살펴보도록 하자. 장난감은 A배터리를 사용하고 있기 때문에 해당 메서드를 실행 시 A배터리에 대한 스팩을 보여주고 있다.</p>

<p>만약 이 장난감의 배터리를 다른 베터리(BatteryB)로 교체를 하고싶으면 어떻게 해야할까? 현재의 구조에서는 배터리를 교체할 수 없다. 왜냐하면 해당 장난감은 배터리 일체형 장난감이기 때문이다. 따라서 배터리를 교체할 수 있도록 다음과 같이 코드를 개선하였다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ElectronicToy</span> <span class="p">{</span>
	<span class="n">private</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">;</span>

	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">battery</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryA</span><span class="p">();</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="err">장난감이</span> <span class="err">장착한</span> <span class="err">배터리의</span> <span class="err">스팩을</span> <span class="err">보여준다</span><span class="p">.</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">showBatterySpec</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery name : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">name</span><span class="p">);</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery capacity : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">capacity</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="err">의존성</span> <span class="err">주입</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">setBattery</span><span class="p">(</span><span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">this</span><span class="p">.</span><span class="n">battery</span> <span class="p">=</span> <span class="n">battery</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>우리가 잘 알고있는 setter함수를 추가하였다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ToyCreateExam</span> <span class="p">{</span>
	<span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>

		<span class="p">//</span><span class="err">장난감</span> <span class="err">생성</span>
		<span class="n">ElectronicToy</span> <span class="n">toy</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ElectronicToy</span><span class="p">();</span>

		<span class="p">//</span><span class="err">배터리</span> <span class="err">교체</span>  
		<span class="n">Battery</span> <span class="n">changeBattery</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryB</span><span class="p">();</span>
		<span class="n">toy</span><span class="p">.</span><span class="n">setBattery</span><span class="p">(</span><span class="n">changeBattery</span><span class="p">);</span>

		<span class="n">toy</span><span class="p">.</span><span class="n">showBatterySpec</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>battery name : B배터리
battery capacity : 30
</code></pre></div></div>
<p>이번에는 배터리를 B배터리로 교체하는데 성공하였다. 이처럼 <u>의존관계에 있는 배터리를 직접 객체에 주입하는 방식으로 속성을 변경하는 것을</u> <strong>의존성 주입</strong>이라고 한다.</p>

<hr />
<h3 id="생성자-함수를-통한-의존성-주입">생성자 함수를 통한 의존성 주입</h3>
<p>의존성 주입은 이전과 같이 <strong>setter</strong> 함수를 이용해도 가능하지만 <strong>생성자</strong>를 이용해서도 가능하다. 이번에는 장난감을 만들때 이미 만들어진 배터리 중 원하는 배터리를 선택한다고 가정하자.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">.</span><span class="n">constructor</span><span class="p">;</span>

<span class="n">import</span> <span class="n">di</span><span class="p">.*;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ElectronicToy</span> <span class="p">{</span>
	<span class="n">private</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">;</span>

	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">battery</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryA</span><span class="p">();</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="err">의존성</span> <span class="err">주입</span>  
	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">(</span><span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">this</span><span class="p">.</span><span class="n">battery</span> <span class="p">=</span> <span class="n">battery</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="p">//</span><span class="err">장난감이</span> <span class="err">장착한</span> <span class="err">배터리의</span> <span class="err">스팩을</span> <span class="err">보여준다</span><span class="p">.</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">showBatterySpec</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery name : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">getName</span><span class="p">());</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery capacity : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">getCapacity</span><span class="p">());</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>기존 클래스에서 setter함수를 제외하고, Battery를 변수로 받는 생성자 함수를 overloading 하였다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">.</span><span class="n">constructor</span><span class="p">;</span>

<span class="n">import</span> <span class="n">di</span><span class="p">.*;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ToyCreateExam</span> <span class="p">{</span>

	<span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
		<span class="p">//</span><span class="err">배터리</span>   
		<span class="n">Battery</span> <span class="n">batteryA</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryA</span><span class="p">();</span>
		<span class="n">Battery</span> <span class="n">batteryB</span> <span class="p">=</span> <span class="n">new</span> <span class="n">BatteryB</span><span class="p">();</span>

		<span class="p">//</span><span class="err">원하는</span> <span class="err">배터리를</span> <span class="err">조립</span><span class="p">(</span><span class="err">주입</span><span class="p">)</span><span class="err">한다</span><span class="p">.</span>  
		<span class="n">ElectronicToy</span> <span class="n">toy</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ElectronicToy</span><span class="p">(</span><span class="n">batteryA</span><span class="p">);</span>
		<span class="p">//</span><span class="n">ElectronicToy</span> <span class="n">toy</span> <span class="p">=</span> <span class="n">new</span> <span class="n">ElectronicToy</span><span class="p">(</span><span class="n">batteryB</span><span class="p">);</span>

		<span class="n">toy</span><span class="p">.</span><span class="n">showBatterySpec</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>다음과 같이 A배터리와 B배터리가 존재하는 상태에서 객체를 생성할 때 원하는 배터리를 <strong>생성자에 주입</strong>하여서 장난감을 생성하였다.</p>

<hr />

<h3 id="스프링-컨테이너에-적용하기">스프링 컨테이너에 적용하기</h3>
<p>지금까지 의존성 주입이 <u>1)생성자, 2)setter</u>를 통해서 동작하는 것을 배웠다. 이번에는 컨테이너 안에서 bean 객체에 두가지 방법을 통해 DI를 적용해보도록 하겠다.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">.</span><span class="n">xml</span><span class="p">;</span>

<span class="n">import</span> <span class="n">di</span><span class="p">.*;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ElectronicToy</span> <span class="p">{</span>
	<span class="n">private</span> <span class="n">Battery</span> <span class="n">battery</span><span class="p">;</span>

	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"toy 생성 "</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="p">//</span><span class="err">생성자를</span> <span class="err">통한</span> <span class="err">의존성</span> <span class="err">주입</span>  
	<span class="k">public</span> <span class="n">ElectronicToy</span><span class="p">(</span><span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">this</span><span class="p">();</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"생성자를 통한 의존성 주입"</span> <span class="p">);</span>
		<span class="n">this</span><span class="p">.</span><span class="n">battery</span> <span class="p">=</span> <span class="n">battery</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="n">setter</span><span class="err">를</span> <span class="err">통한</span> <span class="err">의존성</span> <span class="err">주입</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">setBattery</span><span class="p">(</span><span class="n">Battery</span> <span class="n">battery</span><span class="p">)</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"setter함를 통한 의존성 주입"</span> <span class="p">);</span>
		<span class="n">this</span><span class="p">.</span><span class="n">battery</span> <span class="p">=</span> <span class="n">battery</span><span class="p">;</span>
	<span class="p">}</span>

	<span class="p">//</span><span class="err">장난감이</span> <span class="err">장착한</span> <span class="err">배터리의</span> <span class="err">스팩을</span> <span class="err">보여준다</span><span class="p">.</span>
	<span class="k">public</span> <span class="n">void</span> <span class="n">showBatterySpec</span><span class="p">()</span> <span class="p">{</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery name : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">getName</span><span class="p">());</span>
		<span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"battery capacity : "</span> <span class="p">+</span> <span class="n">battery</span><span class="p">.</span><span class="n">getCapacity</span><span class="p">());</span>
	<span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div>
<p>먼저 ElectronicToy 클래스를 살펴보자. 다음과 같은 로직을 추가하였다.</p>
<ol>
  <li>생성자를 통한 주입, setter를 통한 주입 모두 가능하도록 하였다.</li>
  <li>객체 생성 및 함수 실행 시점을 살펴보기 위해 각각의 메서드 안에 시스템 알럿을 추가하였다.</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>

<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://www.springframework.org/schema/beans
 		http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="nt">&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">"batteryA"</span> <span class="na">class =</span> <span class="s">"di.BatteryA"</span> <span class="nt">/&gt;</span>
	<span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">"batteryB"</span> <span class="na">class =</span> <span class="s">"di.BatteryB"</span> <span class="nt">/&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">"constructorToy"</span> <span class="na">class =</span> <span class="s">"di.xml.ElectronicToy"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;constructor-arg</span> <span class="na">ref =</span> <span class="s">"batteryA"</span><span class="nt">&gt;&lt;/constructor-arg&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>

	<span class="nt">&lt;bean</span> <span class="na">id =</span> <span class="s">"setterToy"</span> <span class="na">class =</span> <span class="s">"di.xml.ElectronicToy"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"battery"</span> <span class="na">ref =</span> <span class="s">"batteryB"</span><span class="nt">&gt;&lt;/property&gt;</span>
	<span class="nt">&lt;/bean&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre></div></div>
<ol>
  <li>
    <dl>
      <dt>생성자 주입을 이용한 constructorToy bean</dt>
      <dd><code class="highlighter-rouge">&lt;constructor-arg&gt;</code>를 이용하여 생성자를 통해 batteryA를 주입</dd>
    </dl>
  </li>
  <li>
    <dl>
      <dt>setter 주입을 이용한 setterToy bean</dt>
      <dd><code class="highlighter-rouge">&lt;property&gt;</code>를 이용하여 setter를 통해 batteryB를 주입</dd>
    </dl>
  </li>
  <li>두가지 방법애 전부 적용 가능한 ElectronicToy 타입으로 정의하였다.</li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">di</span><span class="p">.</span><span class="n">xml</span><span class="p">;</span>

<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">springframework</span><span class="p">.</span><span class="n">context</span><span class="p">.</span><span class="n">support</span><span class="p">.</span><span class="n">GenericXmlApplicationContext</span><span class="p">;</span>

<span class="n">import</span> <span class="n">di</span><span class="p">.*;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">ToyCreateExam</span> <span class="p">{</span>
	<span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
		<span class="p">//</span><span class="err">컨테이너</span> <span class="err">생성</span>  
		<span class="p">//</span><span class="err">컨테이너</span> <span class="err">리소스를</span> <span class="err">불러온다</span>
		<span class="n">GenericXmlApplicationContext</span> <span class="n">ctx</span> <span class="p">=</span>
			<span class="n">new</span> <span class="n">GenericXmlApplicationContext</span><span class="p">(</span><span class="s2">"classpath:applicationContext.xml"</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>
<p>이전 포스트에서 실습한 것처럼 <code class="highlighter-rouge">GenericXmlApplicationContext</code> 클래스를 이용하여 컨테이너 리소스를 가져온다.</p>

<h4 id="실행결과">실행결과</h4>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Nov 20, 2018 7:40:46 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
정보: Loading XML bean definitions from class path resource [applicationContext.xml]
Nov 20, 2018 7:40:46 PM org.springframework.context.support.GenericXmlApplicationContext prepareRefresh
정보: Refreshing org.springframework.context.support.GenericXmlApplicationContext@754ba872: startup date [Tue Nov 20 19:40:46 KST 2018]; root of context hierarchy
battery 객체생성
battery 객체생성
toy 생성
생성자를 통한 의존성 주입
toy 생성
setter함를 통한 의존성 주입
</code></pre></div></div>
<p>xml에서 선언한 바와 같이 각각의 객체들이 두가지 방법으로 의존성 주입이 실행되었음을 확인할 수 있다.<br />
또 하나 살펴봐야 할 점은 getBean 메서드를 이용하여 bean객체를 호출하지 않았음에도 불구하고 시스템 알럿들이 실행되었다는 것이다. <u>이것은 applicationContext.xml에서 선언한 bean들이 메모리에 미리 로드 되었음을 의미한다.</u><br />
즉, 스프링에서 bean 객체는 한번만 생성이 되고 이것을 모든 쓰레드가 공유하여 사용한다. 이러한 개념을 <strong>싱글톤</strong> 이라고 한다.</p>

<hr />

<h3 id="정리">정리</h3>
<ul>
  <li>의존관계 : A가 B로 인해 영향을 받는 것 (B가 변하면 A도 변한다)</li>
  <li>의존성 주입 : 의존관계에 있는 객체를 변수로 받음으로 인해 결합도를 낮춤</li>
  <li>의존성 주입의 방법<br />
1) 생성자를 통한 주입<br />
2) setter 함수를 통한 주입</li>
  <li>xml에서의 의존성 주입<br />
1) <code class="highlighter-rouge">&lt;constructor-arg&gt;</code> : 생성자를 통한 주입<br />
2) <code class="highlighter-rouge">&lt;property&gt;</code> : setter 함수를 통한 주입</li>
</ul>

</article>





<section class="rss">
  <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
</section>

<section class="share">
  <span>Share: </span>
  
    
    
    
      <a href="//www.facebook.com/sharer.php?t=Spring+DI&u=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2018%2F11%2F17%2FSpring-DI.html"
        onclick="window.open(this.href, 'facebook-share', 'width=550,height=255');return false;">
        <i class="fa fa-facebook-square fa-lg"></i>
      </a>
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
      <a href="//www.pinterest.com/pin/create/button/?description=Spring+DI&url=http%3A%2F%2Flocalhost%3A4000%2Fspring%2F2018%2F11%2F17%2FSpring-DI.html&media=http://localhost:4000/assets/posts/1.jpg"
        onclick="window.open(this.href, 'pinterest-share', 'width=550,height=255');return false;">
        <i class="fa fa-pinterest-square fa-lg"></i>
      </a>
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
    
  
    
    
    
    
    
    
    
      <a href="//www.reddit.com/submit" onclick="window.location = '//www.reddit.com/submit?url=' + encodeURIComponent('http://localhost:4000/spring/2018/11/17/Spring-DI.html') + '&title=Spring DI'; return false">
        <i class="fa fa-reddit-square fa-lg"></i>
      </a>
    
    
  
    
    
    
    
    
    
    
    
  
</section>




</div>
</div>

    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <h3 class="footer-heading">Jinow's blog</h3>

    <div class="site-navigation">

      <p><strong>Site Map</strong></p>
      <ul class="pages">
        
        
          <li class="nav-link"><a href="/about/">About</a>
        
        
        
        
        
        
        
        
        
          <li class="nav-link"><a href="/posts/">Posts</a>
        
        
        
          <li class="nav-link"><a href="/typography/">Typography</a>
        
        
        
          <li class="nav-link"><a href="/tag/jekyll/">jekyll</a>
        
        
        
          <li class="nav-link"><a href="/tag/welcome/">welcome</a>
        
        
        
          <li class="nav-link"><a href="/category/jekyll/">Jekyll</a>
        
        
        
          <li class="nav-link"><a href="/category/spring/">Spring</a>
        
        
        
          <li class="nav-link"><a href="/category/java/">Java</a>
        
        
        
        
        
        
        
        
      </ul>
    </div>

    <div class="site-contact">

      <p><strong>Contact</strong></p>
      <ul class="social-media-list">
        <li>
          <a href="mailto:ca98047@gmail.com">
            <i class="fa fa-envelope-o"></i>
            <span class="username">ca98047@gmail.com</span>
          </a>
        </li>

        
          
        
          
          <li>
            <a href="https://github.com/ca98047/ca98047.github.io" title="Fork me on GitHub">
              <i class="fa fa-github"></i>
              <span class="username">ca98047</span>
            </a>
          </li>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        

      </ul>
    </div>

    <div class="site-signature">
      <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p>
      <p class="text">A simple yet classy theme for your Jekyll website or blog.
</p>
    </div>

  </div>

</footer>

<!-- Scripts -->
<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.5/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/lightbox2/2.7.1/js/lightbox.min.js"></script>

<script type="text/javascript">
$(document).ready(function() {
  // Default syntax highlighting
  hljs.initHighlightingOnLoad();

  // Header
  var menuToggle = $('#js-mobile-menu').unbind();
  $('#js-navigation-menu').removeClass("show");
  menuToggle.on('click', function(e) {
    e.preventDefault();
    $('#js-navigation-menu').slideToggle(function(){
      if($('#js-navigation-menu').is(':hidden')) {
        $('#js-navigation-menu').removeAttr('style');
      }
    });
  });
});

</script>






  </body>

</html>
